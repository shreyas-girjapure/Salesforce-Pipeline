name: Master Refresh

on:
  schedule:
    - cron: "*/10 * * * *"
workflow_dispatch:    
jobs:

  refresh-branch-code:

    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2

      # Install Salesforce CLI
      - name: 'Install Salesforce CLI'
        run: |
            wget https://developer.salesforce.com/media/salesforce-cli/sfdx/channels/stable/sfdx-linux-x64.tar.xz
            mkdir ~/sfdx
            tar xJf sfdx-linux-x64.tar.xz -C ~/sfdx --strip-components 1
            echo "$HOME/sfdx/bin" >> $GITHUB_PATH
            ~/sfdx/bin/sfdx version

      # Retrives all soruce data from package.xml 
      - name: Retrive from org based on package.xml
        run: sfdx force:source:retrieve -x manifest\package.xml
